<!--
  Schema.org JSON-LD Structured Data
  Helps search engines and AI understand page content
-->

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "{{ site.url }}/#organization",
      "name": "Recomby.ai",
      "url": "https://recomby.ai",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ site.url }}/img/logo.png",
        "width": 1024,
        "height": 1024
      },
      "description": "{{ site.description }}",
      "email": "{{ site.email }}",
      "sameAs": [
        "https://twitter.com/{{ site.twitter_username }}",
        "https://github.com/{{ site.github_username }}",
        "{{ site.url }}"
      ]
    },
    {
      "@type": "WebSite",
      "@id": "{{ site.url }}/#website",
      "url": "{{ site.url }}",
      "name": "{{ site.title }}",
      "description": "{{ site.description }}",
      "publisher": {
        "@id": "{{ site.url }}/#organization"
      },
      "inLanguage": "en-US"
    }
    {% if page.layout == 'post' %}
    ,{
      "@type": "BlogPosting",
      "@id": "{{ site.url }}{{ page.url }}#article",
      "headline": "{{ page.title }}",
      "description": "{% if page.excerpt %}{{ page.excerpt | strip_html | truncate:200 }}{% else %}{{ page.description }}{% endif %}",
      "image": {
        "@type": "ImageObject",
        "url": "{{ site.url }}/img/og-image.jpg",
        "width": 1200,
        "height": 630
      },
      "datePublished": "{{ page.date | date: "%Y-%m-%dT%H:%M:%SZ" }}",
      {% if page.date_modified %}
      "dateModified": "{{ page.date_modified | date: "%Y-%m-%dT%H:%M:%SZ" }}",
      {% else %}
      "dateModified": "{{ page.date | date: "%Y-%m-%dT%H:%M:%SZ" }}",
      {% endif %}
      "author": {
        "@type": "{% if page.author_type %}{{ page.author_type }}{% else %}Organization{% endif %}",
        "name": "{% if page.author %}{{ page.author }}{% else %}Recomby Team{% endif %}"
      },
      "publisher": {
        "@id": "{{ site.url }}/#organization"
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ site.url }}{{ page.url }}"
      },
      {% if page.tags %}
      "keywords": "{{ page.tags | join: ', ' }}",
      {% endif %}
      "articleSection": "{% if page.category %}{{ page.category }}{% else %}AI Search Optimization{% endif %}",
      "inLanguage": "en-US"
    }
    {% endif %}
    {% if page.schema_faq %}
    ,{
      "@type": "FAQPage",
      "@id": "{{ site.url }}{{ page.url }}#faq",
      "mainEntity": [
        {% for faq in page.schema_faq %}
        {
          "@type": "Question",
          "name": "{{ faq.question }}",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "{{ faq.answer }}"
          }
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
    {% endif %}
    {% if page.schema_table %}
    ,{
      "@type": "Table",
      "@id": "{{ site.url }}{{ page.url }}#table",
      "about": "{{ page.schema_table.about }}",
      "http://schema.org/caption": "{{ page.schema_table.caption }}"
    }
    {% endif %}
    {% if page.schema_howto %}
    ,{
      "@type": "HowTo",
      "@id": "{{ site.url }}{{ page.url }}#howto",
      "name": "{{ page.schema_howto.name }}",
      "description": "{{ page.schema_howto.description }}",
      "step": [
        {% for step in page.schema_howto.steps %}
        {
          "@type": "HowToStep",
          "name": "{{ step.name }}",
          "text": "{{ step.text }}",
          "url": "{{ site.url }}{{ page.url }}#step{{ forloop.index }}"
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
    {% endif %}
  ]
}
</script>
